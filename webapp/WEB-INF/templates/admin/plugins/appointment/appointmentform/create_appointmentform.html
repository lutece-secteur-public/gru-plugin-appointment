<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<div class="row" >
	<form class="form-horizontal" method="post" action="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp" enctype="multipart/form-data">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
		<div class="box box-primary">
			<div class="box-header with-border">
				<h3 class="box-title">#i18n{appointment.create_appointmentform.title}</h3>
			</div>
			<div class="box-body">
			
				<fieldset>
				<legend class="hidden">#i18n{appointment.create_appointmentform.title}</legend>
				<@messages errors=errors />
				<input type="hidden" id="id_form" name="id_form">
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelTitle' inputName='title' mandatory=true value=appointmentform.title!'' maxlength=255 />
				<@fieldTextArea i18nLabelKey='appointment.create_appointmentform.labelDescription' inputName='description' mandatory=true value=appointmentform.description!'' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelTimeStart' inputName='time_start' mandatory=true value=appointmentform.timeStart!'' maxlength=5 i18nHelpBlockKey='appointment.create_appointmentform.labelTimeStart.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelTimeEnd' inputName='time_end' mandatory=true value=appointmentform.timeEnd!'' maxlength=5 i18nHelpBlockKey='appointment.create_appointmentform.labelTimeEnd.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelDurationAppointments' inputName='duration_appointments' mandatory=true value=appointmentform.durationAppointments!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDurationAppointments.help'  maxlength=3 />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelMinDaysBeforeAppointments' inputName='min_days_before_appointment' value=appointmentform.minDaysBeforeAppointment!'0' i18nHelpBlockKey='appointment.create_appointmentform.labelMinDaysBeforeAppointments.help'  maxlength=2 />
				<@fieldInputCalendar i18nLabelKey='appointment.create_appointmentform.labelDateStartValidity' inputName='date_start_validity' value=appointmentform.dateStartValidity!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDateStartValidity.help' cssClass='form-control input-sm' />
				<@fieldInputCalendar i18nLabelKey='appointment.create_appointmentform.labelDateEndValidity' inputName='date_end_validity' value=appointmentform.dateEndValidity!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDateEndValidity.help' cssClass='form-control input-sm' />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelUserCanCancelAppointments' inputName='allow_users_to_cancel_appointments' value='true' checked=appointmentform.allowUsersToCancelAppointments!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelDisplayTitleFo' inputName='display_title_fo' value='true' checked=appointmentform.displayTitleFo!false i18nHelpBlockKey='appointment.create_appointmentform.labelDisplayTitleFo.help' />

				<div class="form-group">
					<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="isOpenWeek">#i18n{appointment.create_appointmentform.labelNbWeeksToDisplay} :</label>
					<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
						<div class="radio">
							<label>
								<input type="radio" id="isOpenWeek" name="isOpenDate" value="true" onClick="javascript:switchVisibilityDate();" checked="">&#160;
							</label>
						</div>
					</div>
				</div>

				<div class="form-group" id="divNbWeek">
					<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="nb_weeks_to_display" ></label>
					<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
						<input type="text" id="nb_weeks_to_display" name="nb_weeks_to_display" value="${appointmentform.nbWeeksToDisplay!''}" maxlength=3 class="form-control input-sm" checked="checked">
						<span class="help-block">#i18n{appointment.create_appointmentform.labelNbWeeksToDisplay.help}</span>
					</div>
				</div>

				<div class="form-group">
					<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="isOpenDate" >#i18n{appointment.create_appointmentform.labelNbDaysToDisplay} :</label>
					<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
						<div class="radio">
							<label>
								<input type="radio" id="isOpenDate" name="isOpenDate" value="true" onClick="javascript:switchVisibilityDate();"/>&#160;
							</label>
						</div>
					</div>
				</div>

				<div class="form-group" id="divNbDate">
					<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="dateLimit" ></label>
					<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
					<div class="input-group" >
					    <div class="input-group-addon"><i class="fa fa-calendar">&nbsp;</i></div>
						<input type="text" id="dateLimit" name="dateLimit" value="${appointmentform.dateLimit!''}" maxlength=3 class="form-control input-sm">
					</div>	
						<span class="help-block">#i18n{appointment.create_appointmentform.labelNbDaysToDisplay.help}</span>
					</div>
				</div>

				
				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelPeoplePerAppointment' inputName='people_per_appointment' mandatory=true value=appointmentform.peoplePerAppointment!'' i18nHelpBlockKey='appointment.create_appointmentform.labelPeoplePerAppointment.help' maxlength=3 />

				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelMaximumNumberOfBookedseatsPerAppointment' inputName='maximum_number_of_booked_seats' mandatory=true value=appointmentform.maximumNumberOfBookedSeats!'' i18nHelpBlockKey='appointment.create_appointmentform.labelMaximumNumberOfBookedseatsPerAppointment.help' maxlength=3 />

				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelReference' inputName='reference' mandatory=true value=appointmentform.reference!'' maxlength=10 i18nHelpBlockKey='appointment.create_appointmentform.labelReference.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelNbMaxByEmail' inputName='max_appointment_mail' mandatory=true value=appointmentform.maxAppointments!'0'  maxlength=2 i18nHelpBlockKey='appointment.create_appointmentform.labelMaxAppointments.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelNbMaxWeek'    inputName='nb_weeks_limits'  mandatory=true  value=appointmentform.weeksLimits!'0'     maxlength=2 i18nHelpBlockKey='appointment.create_appointmentform.labelWeeksLimits.help' />			<@fieldInputText i18nLabelKey='appointment.create_appointmentform.fromTimeSeizure' inputName='seizureDuration' mandatory=true value=appointmentform.seizureDuration!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDurationAppointments.help'  maxlength=2 />
				</fieldset>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">	
		<div class="box box-primary">
			<div class="box-header with-border">
				<h3 class="box-title">#i18n{appointment.modify_appointmentForm.titleAlterablesParameters}</h3>
			</div>
			<div class="box-body">
				<fieldset>
							
				<legend class="hidden">#i18n{appointment.modify_appointmentForm.titleAlterablesParameters}</legend>
				
				<h4>#i18n{appointment.create_appointmentform.labelTitleDaysOpen}</h4>
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenMonday' inputName='is_open_monday' value='true' checked=appointmentform.isOpenMonday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenTuesday' inputName='is_open_tuesday' value='true' checked=appointmentform.isOpenTuesday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenWednesday' inputName='is_open_wednesday' value='true' checked=appointmentform.isOpenWednesday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenThursday' inputName='is_open_thursday' value='true' checked=appointmentform.isOpenThursday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenFriday' inputName='is_open_friday' value='true' checked=appointmentform.isOpenFriday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenSaturday' inputName='is_open_saturday' value='true' checked=appointmentform.isOpenSaturday!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsOpenSunday' inputName='is_open_sunday' value='true' checked=appointmentform.isOpenSunday!false />
				
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsFormStep' inputName='is_form_step' value='true' checked=appointmentform.isFormStep!false />

				<#if listWorkflows??>
					<@fieldInputCombo i18nLabelKey='appointment.create_appointmentform.labelWorkflow' inputName='idWorkflow' items=listWorkflows value="${appointmentform.idWorkflow!}" />
				</#if>
				<@fieldInputCombo i18nLabelKey='appointment.create_appointmentform.labelCalendarTemplate' inputName='calendarTemplateId' items=refListCalendarTemplates value="${appointmentform.calendarTemplateId!}" mandatory=true />
				<#if isCaptchaEnabled>
					<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableCaptcha' inputName='enableCaptcha' value='true' checked=appointmentform.enableCaptcha!false />
				</#if>
				
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableConfirmEmail' inputName='enableConfirmEmail' value='true' checked=appointmentform.enableConfirmEmail!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableMandatoryEmail' inputName='enableMandatoryEmail' value='true' checked=appointmentform.enableMandatoryEmail!false />
				
				
				<div class="form-group" style="clear:both;">
					<label class="control-label col-xs-12 col-sm-3 col-md-3 col-lg-3" for="icon">#i18n{appointment.create_appointmentform.labelIconForm} &nbsp;:</label>
					<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
						<div class="input-group">
							<input id="image_resource" type="file" name="image_resource" accept="image/*"/> 
						</div>
						<p class="help-block">#i18n{appointment.modify_appointmentForm.helpFormatIcon}</p>
					</div>

					<div class="col-xs-12 col-sm-offset-3 col-md-offset-3 col-lg-offset-3">
						<div class="input-group">
							<a class="btn btn-danger btn-sm" onclick="$('#image_resource').val('')">
								<i class="fa fa-times-circle" aria-hidden="true"></i> Effacer
							</a>
						</div>
						<p class="help-block">#i18n{appointment.modify_appointmentForm.helpCancelUploadIcon}</p>
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-12 col-sm-offset-3 col-md-offset-3 col-lg-offset-3">
						<button name="action_createAppointmentForm" class="btn btn-primary btn-sm" type="submit" tabindex="19">
							<i class="glyphicon glyphicon-ok"></i>&nbsp;#i18n{portal.util.labelCreate}
						</button>
						<button name="view_manageAppointmentForms" class="btn btn-default btn-sm" type="submit" tabindex="20">
							<i class="glyphicon glyphicon-remove-circle"></i>&nbsp;#i18n{portal.util.labelCancel}
						</button>
					</div>
				</div>
			</fieldset>
	</div>
</div>
</div>
</form>
</div>
   <script src="js/jquery/plugins/ui/â€‹jquery-ui-1.9.2.custom.min.js"></script>
	<script type="text/javascript">
	$('#dateLimit').datepicker({language: 'fr'});
	$("#divNbDate").toggle(false);
	$('#date_start_validity').datepicker({
	    language:		"${language}",
	    startDate: 		new Date(),
	    weekStart: 1,
	    todayBtn: true,
	    todayHighLight: true,
	    autoclose: true
	});
	$('#date_end_validity').datepicker({
	    language:		"${language}",
	    startDate: 		new Date(),
	    weekStart: 1,
	    todayBtn: true,
	    todayHighLight: true,
	    autoclose: true
	});
	function switchVisibilityDate(){
		$("#divNbDate").toggle(true);
		$("#divNbWeek").toggle(true);
		if($("#isOpenWeek").prop("checked")){
			  $("#isOpenDate").prop("checked" , false)
              $("#dateLimit").val("");
              $("#divNbDate").toggle(false);
		}
		else if($("#isOpenDate").prop("checked")){
			  $("#isOpenWeek").prop("checked" , false)
              $("#nb_weeks_to_display").val("");
              $("#divNbWeek").toggle(false);
		};
		
	}
	</script>