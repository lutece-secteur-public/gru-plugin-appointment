<@commonsAppJS />
<@row>
	<@columns>
		<@tform id='formid' class='horizontal' method='post' action='jsp/admin/plugins/appointment/ManageAppointmentForms.jsp' params='enctype=\'multipart/form-data\''>
		<@box>
			<@boxHeader title='#i18n{appointment.createAppointmentForm.title}' />
			<@boxBody>
				<@messages errors=errors />
				 <@input type='hidden' id='id_form' name='id_form' />
					<@formGroup labelFor='title' labelKey='#i18n{appointment.createAppointmentForm.labelTitle}' mandatory=true>
						<@input type='text' name='title' id='title' value='${appointmentform.title!\'\'}' maxlength=255 />
					</@formGroup>
					<@formGroup labelFor='idCategory' labelKey='#i18n{appointment.createAppointmentForm.labelCategory}'>
						<@select name='idCategory' id='idCategory' items=listCategories default_value='${appointmentform.idCategory!}' />
					</@formGroup>
					<@formGroup labelFor='description' labelKey='#i18n{appointment.labelDescription}' mandatory=true>
						<@input type='textarea' name='description' id='description' maxlength=255 >${appointmentform.description!}</@input>
					</@formGroup>
                        <@formGroup labelFor='date_start_validity' labelKey='#i18n{appointment.createAppointmentForm.labelDateStartValidity}' helpKey='#i18n{appointment.createAppointmentForm.labelDateStartValidity.help}'>
						<@inputGroup>
							<@input type='text' name='date_start_validity' id='date_start_validity' value=appointmentform.dateStartValidity!'' />
							<@inputGroupItem type='text'>
								<@icon style='calendar' />
							</@inputGroupItem>
						</@inputGroup>
						<@getDatePickerBootstrap idField="date_start_validity" language=language />
					</@formGroup>
					
					<@formGroup labelFor='date_end_validity' labelKey='#i18n{appointment.createAppointmentForm.labelDateEndValidity}' helpKey='#i18n{appointment.createAppointmentForm.labelDateEndValidity.help}'>
						<@inputGroup>
							<@input type='text' name='date_end_validity' id='date_end_validity' value=appointmentform.dateEndValidity!'' />
							<@inputGroupItem type='text'>
								<@icon style='calendar' />
							</@inputGroupItem>
						</@inputGroup>
						<@getDatePickerBootstrap idField="date_end_validity" language=language />
					</@formGroup>
					<@formGroup labelFor='bo_overbooking' labelKey='#i18n{appointment.label.BoOverbooking}' helpKey='#i18n{appointment.label.BoOverbooking.help}'>
                      <@checkBox labelFor='bo_overbooking' name='bo_overbooking' id='bo_overbooking' value='true' checked=appointmentform.boOverbooking!false />
     				</@formGroup>
					<@formGroup labelFor='is_multislot_appointment' labelKey='#i18n{appointment.label.isMultislotAppointment}' helpKey='#i18n{appointment.label.isMultislotAppointment.help}'>
						<@checkBox name='is_multislot_appointment' id='is_multislot_appointment' value='true' checked=appointmentform.isMultislotAppointment!false params='onchange="javascript:toggleConsecutiveSlots();"'/>
					</@formGroup>
					<@formGroup labelFor='nb_consecutive_slots' labelKey='#i18n{appointment.label.nbConsecutiveSlots}' helpKey='#i18n{appointment.label.nbConsecutiveSlots.help}' mandatory=true>
						<@input type='text' name='nb_consecutive_slots' id='nb_consecutive_slots' value=appointmentform.nb_consecutive_slots!'1' params='onkeypress="return validateQty(event);"' maxlength=2 />
					</@formGroup>
					<@formGroup labelFor='display_title_fo' labelKey='#i18n{appointment.label.displayTitleFo}' helpKey='#i18n{appointment.label.displayTitleFo.help}'>
						<@checkBox name='display_title_fo' id='display_title_fo' value='true' checked=appointmentform.displayTitleFo!false />
					</@formGroup>
						
					<@formGroup labelFor='is_displayed_on_portlet' labelKey='#i18n{appointment.label.displayOnPortlet}' helpKey='#i18n{appointment.label.displayOnPortlet.help}'>
						<@checkBox name='is_displayed_on_portlet' id='is_displayed_on_portlet' value='true' checked=appointmentform.isDisplayedOnPortlet!false />
					</@formGroup>
					
					<@formGroup labelFor='nb_weeks_to_display' labelKey='#i18n{appointment.label.nbWeeksToDisplay}' helpKey='#i18n{appointment.label.nbWeeksToDisplay.help}' mandatory=true>
						<@input type='text' name='nb_weeks_to_display' id='nb_weeks_to_display' value=appointmentform.nbWeeksToDisplay!'' params='onkeypress="return validateQty(event);"' maxlength=2 />
					</@formGroup>
					
					<@formGroup labelFor='nb_days_before_new_appointment' labelKey='#i18n{appointment.createAppointmentForm.labelNbDaysBeforeNewAppointment}' helpKey='#i18n{appointment.createAppointmentForm.labelNbDaysBeforeNewAppointment.help}' mandatory=true>
						<@input type='text' name='nb_days_before_new_appointment' id='nb_days_before_new_appointment' value=appointmentform.nbDaysBeforeNewAppointment!'' params='onkeypress="return validateQty(event);"' maxlength=2 />
					</@formGroup>
					
					<@formGroup labelFor='nb_max_appointments_per_user' labelKey='#i18n{appointment.createAppointmentForm.labelNbMaxAppointments}' helpKey='#i18n{appointment.createAppointmentForm.labelNbMaxAppointments.help}' mandatory=true>
						<@input type='text' name='nb_max_appointments_per_user' id='nb_max_appointments_per_user' value=appointmentform.nbMaxAppointmentsPerUser!'' params='onkeypress="return validateQty(event);"' maxlength=2 />
					</@formGroup>
					
					<@formGroup labelFor='nb_days_for_max_appointments_per_user' labelKey='#i18n{appointment.createAppointmentForm.labelNbDaysForMaxAppointments}' helpKey='#i18n{appointment.createAppointmentForm.labelNbDaysForMaxAppointments.help}' mandatory=true>
						<@input type='text' name='nb_days_for_max_appointments_per_user' id='nb_days_for_max_appointments_per_user' value=appointmentform.nbDaysForMaxAppointmentsPerUser!'' params='onkeypress="return validateQty(event);"' maxlength=2 />
					</@formGroup>
					<@formGroup labelFor='min_time_before_appointment' labelKey='#i18n{appointment.createAppointmentForm.labelMinTimeBeforeAppointment}' helpKey='#i18n{appointment.createAppointmentForm.labelMinTimeBeforeAppointment.help}' mandatory=true>
						<@input type='text' name='min_time_before_appointment' id='min_time_before_appointment' value=appointmentform.minTimeBeforeAppointment!'' params='onkeypress="return validateQty(event);"' maxlength=3 />
					</@formGroup>

					<@formGroup labelFor='reference' labelKey='#i18n{appointment.createAppointmentForm.labelReference}' helpKey='#i18n{appointment.createAppointmentForm.labelReference.help}'>
						<@input type='text' name='reference' id='reference' value=appointmentform.reference!'' maxlength=10 />
					</@formGroup>
					<@formGroup labelFor='capacity_per_slot' labelKey='#i18n{appointment.createAppointmentForm.labelCapacityPerSlot}' helpKey='#i18n{appointment.createAppointmentForm.labelCapacityPerSlot.help}'>
						<@input type='text' name='capacity_per_slot' id='capacity_per_slot' value=appointmentform.capacityPerSlot!'1' maxlength=4 />
					</@formGroup>
			</@boxBody>
		</@box>
		<@box>
			<@boxHeader title='#i18n{appointment.createAppointmentForm.LabelWeekType}' />
				<@boxBody>
			 		<@formGroup labelFor='name' labelKey='#i18n{appointment.createAppointmentForm.labelName}' mandatory=true>
						<@input type='text' name='name' id='name' value='${appointmentform.name!\'\'}' maxlength=50 />
					</@formGroup>
					<@formGroup labelFor='descriptionRule' labelKey='#i18n{appointment.createAppointmentForm.labelDescriptionRule}' mandatory=true>
						<@input type='textarea' name='description_rule' id='description_rule' maxlength=255 >${appointmentform.descriptionRule!}</@input>
					</@formGroup>
					<@input type='hidden' name='color' id='color' value='${appointmentform.color!"#1AF355"}' maxlength=255 />

					<@formGroup labelFor='max_people_per_appointment' labelKey='#i18n{appointment.createAppointmentForm.labelMaxPeoplePerAppointment}' helpKey='#i18n{appointment.createAppointmentForm.labelMaxPeoplePerAppointment.help}' mandatory=true>
						<@input type='text' name='max_people_per_appointment' id='max_people_per_appointment' value=appointmentform.maxPeoplePerAppointment!'' params='onkeypress="return validateQty(event);"' maxlength=3 />
					</@formGroup>
					<@formGroup labelFor='time_start' labelKey='#i18n{appointment.createAppointmentForm.labelTimeStart}' helpKey='#i18n{appointment.createAppointmentForm.labelTimeStart.help}' mandatory=true>
						<@inputGroup>
							<@input type='text' name='time_start' id='time_start' value=appointmentform.timeStart!'' />
							<@inputGroupItem type='text'>
								<@icon style='clock-o' />
							</@inputGroupItem>
						</@inputGroup>
					</@formGroup>
					<@formGroup labelFor='time_end' labelKey='#i18n{appointment.createAppointmentForm.labelTimeEnd}' helpKey='#i18n{appointment.createAppointmentForm.labelTimeEnd.help}' mandatory=true>
						<@inputGroup>
							<@input type='text' name='time_end' id='time_end' value=appointmentform.timeEnd!'' />
							<@inputGroupItem type='text'>
								<@icon style='clock-o' />
							</@inputGroupItem>
						</@inputGroup>
					</@formGroup>
					<@formGroup labelFor='duration_appointments' labelKey='#i18n{appointment.createAppointmentForm.labelDurationAppointments}' helpKey='#i18n{appointment.createAppointmentForm.labelDurationAppointments.help}' mandatory=true>
						<@input type='text' name='duration_appointments' id='duration_appointments' value=appointmentform.durationAppointments!'' params='onkeypress="return validateQty(event);"' maxlength=3 />
					</@formGroup>
					 <@formGroup labelFor='max_capacity_per_slot' labelKey='#i18n{appointment.createAppointmentForm.labelMaxCapacityPerSlot}' helpKey='#i18n{appointment.createAppointmentForm.labelMaxCapacityPerSlot.help}' mandatory=true>
						<@input type='text' name='max_capacity_per_slot' id='max_capacity_per_slot' value=appointmentform.maxCapacityPerSlot!'' params='onkeypress="return validateQty(event);"' maxlength=3 />
					</@formGroup>
				</@boxBody>
			</@box>
			<@box>
				<@boxHeader title='#i18n{appointment.modifyAppointmentForm.titleAlterablesParameters}' />
				<@boxBody>
					<h4>#i18n{appointment.createAppointmentForm.labelTitleDaysOpen}</h4>
						<@formGroup>
							<@checkBox name='is_open_monday' id='is_open_monday' value='true' checked=appointmentform.isOpenMonday!false labelFor='is_open_monday' labelKey='#i18n{appointment.label.OpenMonday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_tuesday' id='is_open_tuesday' value='true' checked=appointmentform.isOpenTuesday!false labelFor='is_open_tuesday' labelKey='#i18n{appointment.label.OpenTuesday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_wednesday' id='is_open_wednesday' value='true' checked=appointmentform.isOpenWednesday!false labelFor='is_open_wednesday' labelKey='#i18n{appointment.label.OpenWednesday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_thursday' id='is_open_thursday' value='true' checked=appointmentform.isOpenThursday!false labelFor='is_open_thursday' labelKey='#i18n{appointment.label.OpenThursday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_friday' id='is_open_friday' value='true' checked=appointmentform.isOpenFriday!false labelFor='is_open_friday' labelKey='#i18n{appointment.label.OpenFriday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_saturday' id='is_open_saturday' value='true' checked=appointmentform.isOpenSaturday!false labelFor='is_open_saturday' labelKey='#i18n{appointment.label.OpenSaturday}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='is_open_sunday' id='is_open_sunday' value='true' checked=appointmentform.isOpenSunday!false labelFor='is_open_sunday' labelKey='#i18n{appointment.label.OpenSunday}' />
						</@formGroup>
						<#if listWorkflows??>
							<@formGroup labelFor='idWorkflow' labelKey='#i18n{appointment.createAppointmentForm.labelWorkflow}'>
								<@select name='idWorkflow' id='idWorkflow' items=listWorkflows default_value='${appointmentform.idWorkflow!}' />
							</@formGroup>
						</#if>
						<@formGroup labelFor='workgroup' labelKey='#i18n{appointment.createAppointmentForm.labelWorkgroup}'>
							<@select name='workgroup' id='workgroup' items=user_workgroup_list default_value='${appointmentform.workgroup!}' />
						</@formGroup>
						<@formGroup labelFor='calendarTemplateId' labelKey='#i18n{appointment.createAppointmentForm.labelCalendarTemplate}' mandatory=true>
							<@select name='calendarTemplateId' id='calendarTemplateId' items=refListCalendarTemplates default_value='${appointmentform.calendarTemplateId!}' />
						</@formGroup>
						<#if accesscontrol_list?has_content && accesscontrol_list?size gt 1>
							<@formGroup labelFor='id_accesscontrol' labelKey='#i18n{appointment.createAppointmentForm.accesscontrol.label}' helpKey='#i18n{appointment.createAppointmentForm.accesscontrol.label.help}'>
								<@select name='id_accesscontrol' id='id_accesscontrol' items=accesscontrol_list default_value='${accesscontrol_id!}' />
							</@formGroup>
						</#if>
						<#if isCaptchaEnabled>
							<@formGroup>
								<@checkBox name='enableCaptcha' id='enableCaptcha' value='true' checked=appointmentform.enableCaptcha!false labelFor='enableCaptcha' labelKey='#i18n{appointment.createAppointmentForm.labelEnableCaptcha}' />
							</@formGroup>
						</#if>
						<@formGroup>
							<@checkBox name='enableMandatoryEmail' id='enableMandatoryEmail' value='true' checked=appointmentform.enableMandatoryEmail!false labelFor='enableMandatoryEmail' labelKey='#i18n{appointment.createAppointmentForm.labelEnableMandatoryEmail}' />
						</@formGroup>
						<@formGroup>
							<@checkBox name='activeAuthentication' id='activeAuthentication' value='true' checked=appointmentform.activeAuthentication!false labelFor='activeAuthentication' labelKey='#i18n{appointment.createAppointmentForm.labelActiveAuthentication}' />
						</@formGroup>

						<@formGroup>
							<@checkBox orientation='switch' labelFor='anonymizable' labelKey='#i18n{appointment.createAppointmentForm.labelAnonymizable}' name='anonymizable' id='anonymizable' value='true' checked=appointmentform.anonymizable!false params='onchange="javascript:changeVisilityAnonymizePattern();"'/>
						</@formGroup>
						<@formGroup labelFor='anonymization_pattern' id="anonymization_pattern_group" labelKey='#i18n{appointment.createAppointmentForm.labelAnonymizePattern}' helpKey='#i18n{appointment.createAppointmentForm.labelAnonymizePattern.help}' >
							<@input type='text' name='anonymization_pattern' id='anonymization_pattern' value=appointmentform.anonymizationPattern!'' maxlength=255 />
						</@formGroup>

						<@formGroup labelFor='role' labelKey='#i18n{appointment.createAppointmentForm.labelRole}'>
							<@select name='role' id='role' items=refListRoles default_value='${appointmentform.role!}' />
						</@formGroup>
						<@formGroup labelFor='icon' labelKey='#i18n{appointment.createAppointmentForm.labelIconForm}' helpKey='#i18n{appointment.modifyAppointmentForm.helpFormatIcon}'>
							<@inputGroup>
								<@input type='file' id='image_resource' name='image_resource' params='accept="image/*"' />
								<@inputGroupItem>
									<@button color='btn-danger' params='onclick="$(\'#image_resource\').val(\'\')"' buttonIcon='times' title='Delete' size='' />
								</@inputGroupItem>
							</@inputGroup>
						</@formGroup>
						<@formGroup labelFor='geoloc_address' labelKey='#i18n{appointment.label.formAddress}' helpKey='#i18n{appointment.label.addressDescription}'>
							<@input type='text' name='geoloc_address' id='geoloc_address' value='${(appointmentform.address?html)!}' />
							<@input type='text' name='geoloc_longitude' id='geoloc_longitude' value='${(appointmentform.longitude?c)!}' />
							<@input type='text' name='geoloc_latitude' id='geoloc_latitude' value='${(appointmentform.latitude?c)!}' />
							<p class="help-block" id="help_address">#i18n{appointment.help.formAddress}</p>
							<!-- used to keep state if the user presses back button -->
							<input type="hidden" name="hidden_address" id="hidden_address" >
							<script type='text/javascript'>
							$('#geoloc_address').clone().attr('type','hidden').insertAfter('#geoloc_address').prev().remove();
							$('#geoloc_longitude').clone().attr('type','hidden').insertAfter('#geoloc_longitude').prev().remove();
							$('#geoloc_latitude').clone().attr('type','hidden').insertAfter('#geoloc_latitude').prev().remove();
							$('<div class="input-group"><input type="text" id="address_address" name="address_address" class="form-control"><span class="input-group-btn"><button class="btn btn-danger btn-flat" type="button" title="#i18n{appointment.label.clearAddress}" id="button_delete_address"><i class="fa fa-times"></i></button> </span>').insertAfter('#geoloc_address');
							$('<div id=map_address style="height: 300px; width: 100%"></div>').insertBefore('#hidden_address');
							if (typeof(lutece_map_resources_loaded) == 'undefined') {
								lutece_map_resources_loaded = true
								var loadresource = document.createElement('link');
								loadresource.setAttribute("rel", "stylesheet");
								loadresource.setAttribute("type", "text/css");
								loadresource.setAttribute("href", "js/plugins/leaflet/leaflet/leaflet.css");
								document.getElementsByTagName("head")[0].appendChild(loadresource);

								loadresource = document.createElement('script');
								loadresource.setAttribute("type", "text/javascript");
								loadresource.setAttribute("src",  "jsp/admin/plugins/address/modules/autocomplete/SetupSuggestPOI.js.jsp");
								loadresource.async = false;
								document.getElementsByTagName("head")[0].appendChild(loadresource);

								loadresource = document.createElement('script');
								loadresource.setAttribute("type", "text/javascript");
								loadresource.setAttribute("src",  "js/plugins/address/modules/autocomplete/jQuery.suggestPOI.js");
								loadresource.async = false;
								document.getElementsByTagName("head")[0].appendChild(loadresource);

								loadresource = document.createElement('script');
								loadresource.setAttribute("type", "text/javascript");
								loadresource.setAttribute("src",   "js/plugins/leaflet/leaflet/leaflet.js" );
								document.getElementsByTagName("head")[0].appendChild(loadresource);
							}
							$(window).load(function() {
								var map = L.map('map_address').setView([48.85632, 2.33272], 12);
								var markers_layer = L.featureGroup().addTo(map);
								// create the tile layer with correct attribution
								var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
								var osmAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
								var osm = new L.TileLayer(osmUrl, {minZoom: 8, maxZoom: 16, attribution: osmAttrib}).addTo(map);

								var jAdresse = $('#address_address');
								jAdresse.suggestPOI();
								jAdresse.bind($.suggestPOI.EVT_SELECT, function(event) {

								var poi = event.poi;
								if (poi) {
									var address = poi.libelleTypo;

									markers_layer.clearLayers();
									var marker = L.marker([poi.y, poi.x]).addTo(markers_layer);
									map.fitBounds(markers_layer.getBounds());

									var obj= {
											"type": "Feature",
											"properties": {
												"address": address
											},
											"geometry": {
												"type": "Point",
												"coordinates": [poi.x, poi.y]
											}
										};
										$('#hidden_address').val(JSON.stringify(obj));
										$('#geoloc_address').val(address);
										$('#geoloc_latitude').val(poi.y);
										$('#geoloc_longitude').val(poi.x);
									}
								});
								$("#button_delete_address").on('click', function() {
									$('#address_address').val("");
									//Don't put the empty string to disambiguate with the user
									//clearing the field, and then pressing the browser back button
									$('#hidden_address').val("false");
									$('#geoloc_address').val("");
									$('#geoloc_latitude').val("");
									$('#geoloc_longitude').val("");
									map.setView([48.85632, 2.33272], 12);
									markers_layer.clearLayers();
								});
								//Try to restore from back/forward browser history buttons
								var prev_data = $('#hidden_address').val();
								var prev_value;
								var user_cleared = false;
								if (prev_data) {
									prev_value=JSON.parse(prev_data);
									if (!prev_value) {
										user_cleared = true;
									}
							} else {
								var server_address = $('#geoloc_address').val();
								var server_longitude = $('#geoloc_longitude').val();
								var server_latitude = $('#geoloc_latitude').val();
								if (server_address && server_longitude && server_latitude) {
									prev_value = {
										"type":"Feature",
										"properties": {
										"address": server_address
									},
									"geometry": {
										"type":"Point",
										"coordinates":[server_longitude,server_latitude]
									}
									};
								} else {
									user_cleared = true;
								}
							}
							if (!user_cleared) {
								$('#address_address').val(prev_value.properties.address);
								$('#geoloc_address').val(prev_value.properties.address);
								$('#geoloc_latitude').val(prev_value.geometry.coordinates[1]);
								$('#geoloc_longitude').val(prev_value.geometry.coordinates[0]);
								markers_layer.clearLayers();
								var marker = L.marker([prev_value.geometry.coordinates[1],prev_value.geometry.coordinates[0]]).addTo(markers_layer);
								map.fitBounds(markers_layer.getBounds());
							}
						});
						</script>
						</@formGroup>
						<@formGroup>
							<@input type='hidden' name='action_createAppointmentForm' value='' />
							<@button type='submit' buttonIcon='check' title='#i18n{portal.util.labelCreate}' />
							<@aButton href='jsp/admin/plugins/appointment/ManageAppointmentForms.jsp' buttonIcon='times' title='#i18n{portal.util.labelCancel}' color='default' />
						</@formGroup>
				</@boxBody>
			</@box>
		</@tform>
	</@columns>
</@row>
<script>
	$('#formid').on('keyup keypress', function(e) {
	    var keyCode = e.keyCode || e.which;
	    if (keyCode === 13) {
	      e.preventDefault();
	      return false;
	    }
	});
    function validateQty(event) {
		var key = window.event ? event.keyCode : event.which;
	
	if (event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 46
	 || event.keyCode == 37 || event.keyCode == 39) {
		return true;
	}
	else if ( key < 48 || key > 57 ) {
		return false;
	}
	else return true;
	};
    $('#date_start_validity').datepicker({
		    language:		"${language}",
		    startDate: 		new Date(),
		    weekStart: 1,
		    todayBtn: true,
		    todayHighLight: true,
		    autoclose: true
		});
	$('#date_end_validity').datepicker({
		    language:		"${language}",
		    startDate: 		new Date(),
		    weekStart: 1,
		    todayBtn: true,
		    todayHighLight: true,
		    autoclose: true
		});
	$(function () {
		$('#time_start').datetimepicker({
		  format: 'HH:mm',
		  stepping: 5
	    });
		$('#time_end').datetimepicker({
		  format: 'HH:mm',
		  stepping: 5
	    });
	});
	function toggleConsecutiveSlots() {
		var nbConsecutiveSlots = document.getElementById('nb_consecutive_slots');
		var isMultislotAppointment = document.getElementById('is_multislot_appointment');

		if (isMultislotAppointment.checked) {
			// Checkbox is checked, enable inputs field and set value to 5
			nbConsecutiveSlots.disabled = false;
			nbConsecutiveSlots.value = '5';
		} else {
			// Checkbox is unchecked, disable inputs field and set value to 1
			nbConsecutiveSlots.disabled = true;
			nbConsecutiveSlots.value = '1';
		}
  	}
	// Initial call to set the initial state of the input field
	toggleConsecutiveSlots();

	function validateNbConsecutiveSlots() {
		var nbConsecutiveSlotsInput = document.getElementById('nb_consecutive_slots');
		var enteredValue = parseInt(nbConsecutiveSlotsInput.value);

		if (enteredValue < 1 || isNaN(enteredValue)) {
			nbConsecutiveSlotsInput.value = '';
		}
	}

	// Add event listener to validate the input value
	var nbConsecutiveSlotsInput = document.getElementById('nb_consecutive_slots');
	nbConsecutiveSlotsInput.addEventListener('change', validateNbConsecutiveSlots);

	changeVisilityAnonymizePattern();
	function changeVisilityAnonymizePattern()
	{
		if(document.getElementById("anonymizable").checked)
		{
			document.getElementById("anonymization_pattern_group").style.display = 'block';
			document.getElementById("anonymization_pattern").required = true;
		}
		else
		{
			document.getElementById("anonymization_pattern_group").style.display = 'none';
		}
	}
</script>